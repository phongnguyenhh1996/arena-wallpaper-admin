(this["webpackJsonparena-wallpaper-admin"]=this["webpackJsonparena-wallpaper-admin"]||[]).push([[0],{327:function(e,t,a){e.exports=a(480)},332:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),c=a.n(o),i=(a(332),a(103)),l=a(554),s=a(553),u=a(268),m=a(555),d=a(556),h=a(547),g=a(548),p=function(e){return n.a.createElement(m.a,e,n.a.createElement(d.a,null,n.a.createElement(h.a,{source:"id"}),n.a.createElement(h.a,{source:"name"}),n.a.createElement(h.a,{source:"createdDate"}),n.a.createElement(h.a,{source:"viewCount"}),n.a.createElement(g.a,{source:"imageUrl.data.imageUrl",title:"Image"})))},f=a(193),v=a.n(f),E=a(264),w=a(285),b=a(549),k=a(283),S=a(561),j=a(557),P=a(562),O=a(558),I=a(36),y="https://us-central1-arenawallpaper.cloudfunctions.net/api",R=function(e){var t=e.handleSubmitWithRedirect,a=Object(w.a)(e,["handleSubmitWithRedirect"]),o=Object(I.d)(),c=Object(r.useCallback)(Object(E.a)(v.a.mark((function e(){var a,r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,r=o.getFieldState("imageUrl").value.rawFile,a.append("image",r),e.next=5,fetch(y+"/media",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("token")},body:a}).then((function(e){return e.json()}));case 5:n=e.sent,o.change("imageUrl",n),t("list");case 8:case"end":return e.stop()}}),e)}))),[o,t]);return n.a.createElement(b.a,Object.assign({},a,{handleSubmitWithRedirect:c}))},U=function(e){return n.a.createElement(k.a,e,n.a.createElement(R,{label:"Custom Save",redirect:"list",submitOnEnter:!1}))},W=function(e){return n.a.createElement(S.a,e,n.a.createElement(j.a,{toolbar:n.a.createElement(U,null)},n.a.createElement(P.a,{source:"name"}),n.a.createElement(O.a,{source:"imageUrl",label:"Related pictures",accept:"image/*",placeholder:n.a.createElement("p",null,"Drop your file here")},n.a.createElement(g.a,{source:"src",title:"title"}))))},x={login:function(e){var t=e.username,a=e.password,r=new Request(y+"/login?isAdmin=true",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token;localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},getPermissions:function(e){return Promise.resolve()}},A=Object(u.a)(y,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("Authorization","Bearer ".concat(a)),i.a.fetchJson(e,t)})),B=function(){return n.a.createElement(l.a,{dataProvider:A,authProvider:x},n.a.createElement(s.a,{name:"categories",list:p,create:W}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[327,1,2]]]);
//# sourceMappingURL=main.73baa246.chunk.js.map