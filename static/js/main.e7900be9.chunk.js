(this["webpackJsonparena-wallpaper-admin"]=this["webpackJsonparena-wallpaper-admin"]||[]).push([[0],{344:function(e,t,a){e.exports=a(493)},349:function(e,t,a){},493:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),o=a.n(c),l=(a(349),a(100)),i=a(569),s=a(568),u=a(288),m=a(570),d=a(571),h=a(560),E=a(561),g=function(e){return n.a.createElement(m.a,e,n.a.createElement(d.a,null,n.a.createElement(h.a,{source:"id"}),n.a.createElement(h.a,{source:"name"}),n.a.createElement(h.a,{source:"createdDate"}),n.a.createElement(h.a,{source:"viewCount"}),n.a.createElement(E.a,{source:"image.imageUrl",title:"Image"})))},p=a(105),f=a.n(p),b=a(161),v=a(165),w=a(562),S=a(302),j=a(577),k=a(573),O=a(565),P=a(574),y=a(35),I="https://us-central1-arenawallpaper.cloudfunctions.net/api",R=function(e){var t=e.handleSubmitWithRedirect,a=Object(v.a)(e,["handleSubmitWithRedirect"]),c=Object(y.d)(),o=Object(r.useCallback)(Object(b.a)(f.a.mark((function e(){var a,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,r=c.getFieldState("image").value.rawFile,a.append("image",r),e.next=5,fetch(I+"/media",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("token")},body:a}).then((function(e){return e.json()}));case 5:n=e.sent,c.change("image",n.data),t("list");case 8:case"end":return e.stop()}}),e)}))),[c,t]);return n.a.createElement(w.a,Object.assign({},a,{handleSubmitWithRedirect:o}))},C=function(e){return n.a.createElement(S.a,e,n.a.createElement(R,{label:"Custom Save",redirect:"list",submitOnEnter:!1}))},W=function(e){return n.a.createElement(j.a,e,n.a.createElement(k.a,{toolbar:n.a.createElement(C,null)},n.a.createElement(O.a,{source:"name"}),n.a.createElement(P.a,{source:"image",label:"Related pictures",accept:"image/*",placeholder:n.a.createElement("p",null,"Drop your file here")},n.a.createElement(E.a,{source:"src",title:"title"}))))},x=function(e){return n.a.createElement(m.a,e,n.a.createElement(d.a,null,n.a.createElement(h.a,{source:"id"}),n.a.createElement(h.a,{source:"name"}),n.a.createElement(h.a,{source:"description"}),n.a.createElement(h.a,{source:"createdAt"}),n.a.createElement(h.a,{source:"viewCount"}),n.a.createElement(h.a,{source:"useCount"}),n.a.createElement(h.a,{source:"hero"}),n.a.createElement(E.a,{source:"image.imageUrl",title:"Image"})))},F=a(572),T=a(578),A=function(e){var t=e.handleSubmitWithRedirect,a=Object(v.a)(e,["handleSubmitWithRedirect"]),c=Object(y.d)(),o=Object(r.useCallback)(Object(b.a)(f.a.mark((function e(){var a,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,r=c.getFieldState("image").value.rawFile,a.append("image",r),e.next=5,fetch(I+"/media",{method:"POST",headers:{authorization:"Bearer "+localStorage.getItem("token")},body:a}).then((function(e){return e.json()}));case 5:n=e.sent,c.change("image",n.data),t("list");case 8:case"end":return e.stop()}}),e)}))),[c,t]);return n.a.createElement(w.a,Object.assign({},a,{handleSubmitWithRedirect:o}))},B=function(e){return n.a.createElement(S.a,e,n.a.createElement(A,{label:"Save",redirect:"list",submitOnEnter:!1}))},D=function(e){return n.a.createElement(j.a,e,n.a.createElement(k.a,{toolbar:n.a.createElement(B,null)},n.a.createElement(O.a,{source:"name"}),n.a.createElement(O.a,{source:"description"}),n.a.createElement(O.a,{source:"hero"}),n.a.createElement(F.a,{label:"Category",source:"categoryId",reference:"categories"},n.a.createElement(T.a,{optionText:"name"})),n.a.createElement(P.a,{source:"image",label:"Related pictures",accept:"image/*",placeholder:n.a.createElement("p",null,"Drop your file here")},n.a.createElement(E.a,{source:"src",title:"title"}))))},J={login:function(e){var t=e.username,a=e.password,r=new Request(I+"/login?isAdmin=true",{method:"POST",body:JSON.stringify({username:t,password:a}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var t=e.token;localStorage.setItem("token",t)}))},logout:function(){return localStorage.removeItem("token"),Promise.resolve()},checkAuth:function(){return localStorage.getItem("token")?Promise.resolve():Promise.reject()},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()},getPermissions:function(e){return Promise.resolve()}},z=Object(u.a)(I,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("Authorization","Bearer ".concat(a)),l.a.fetchJson(e,t)})),H=function(){return n.a.createElement(i.a,{dataProvider:z,authProvider:J},n.a.createElement(s.a,{name:"categories",list:g,create:W}),n.a.createElement(s.a,{name:"wallpapers",list:x,create:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[344,1,2]]]);
//# sourceMappingURL=main.e7900be9.chunk.js.map